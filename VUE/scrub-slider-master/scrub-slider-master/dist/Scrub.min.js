function debounce(e,t,r){var l;return function(){var c=this,n=arguments,o=function(){l=null,r||e.apply(c,n)},i=r&&!l;clearTimeout(l),l=setTimeout(o,t),i&&e.apply(c,n)}}function Scrub(e){function t(){var t=isObject(e)||"object"==typeof e?document.querySelectorAll(e.target)[0]:document.querySelectorAll(e)[0];try{!function(r){var l=isObject(e)||"object"==typeof e?e.target:e;if(l=l.replace("#",""),l=l.replace(".",""),l.indexOf(".")>-1&&document.querySelectorAll(l).length>1&&console.warn("%cScrub Slider works best if you use an %cID%c or a %cunique%c class... ","color:cornflowerblue;","color:indianred;","color:cornflowerblue;","color:indianred;","color:cornflowerblue;"),void 0!=t){t.className+=" scrub-slider";var c=t.offsetWidth;null!=e.height&&(t.style.height=e.height);for(var n=t.children,o=0;o<2;o++){var i=n[o];n[o]&&i.tagName&&function(r,l,n){if("DIV"==l){var o=r.cloneNode(!0);r.parentNode.removeChild(r);var i=document.createElement("div");if(i.className=0==n?"scrub-content scrub-left":"scrub-content scrub-right",i.style.width=parseInt(c/2)+"px",t.insertBefore(i,t.firstChild),o.style.width=c+"px",null!=e.alt&&o.setAttribute("alt",0==n?e.alt[0]:e.alt[1]),null!=e.src){var s=0==n?e.src[0]:e.src[1];o.style.backgroundImage="url("+s+")"}i.appendChild(o),""==r.style.backgroundImage&&console.warn("%cScrub Slider divs must have a %cbackground image to work!%c >:[","color:cornflowerblue;","color:indianred;","color:cornflowerblue;");var a=debounce(function(e){var r=t.offsetWidth;i.style.width=parseInt(r/2)+"px",e.style.width=r+"px"},500);window.addEventListener("resize",function(e){a(o)})}else if("IMG"==l){var o=document.createElement("div"),s=r.getAttribute("src");null!=e.src&&(s=0==n?e.src[0]:e.src[1]),r.parentNode.removeChild(r);var i=document.createElement("div");i.className=0==n?"scrub-content scrub-left":"scrub-content scrub-right",i.style.width=parseInt(c/2)+"px",null!=e.alt&&o.setAttribute("alt",0==n?e.alt[0]:e.alt[1]),t.insertBefore(i,t.firstChild),o.style.width=c+"px",o.style.backgroundImage="url("+s+")",i.appendChild(o);var a=debounce(function(e){var r=t.offsetWidth;i.style.width=parseInt(r/2)+"px",e.style.width=r+"px"},500);window.addEventListener("resize",function(e){a(o)})}}(n[o],i.tagName,o)}r(t)}else console.warn("%cScrub Slider needs to be passed an appropriate selector %c- preferably an ID, but a specific, unique class works too.","color:cornflowerblue;","color:indianred;")}(function(t){var r=document.createElement("div");r.className="sliding handleOn ",r.innerHTML='<span class="sliding-left"></span><span class="sliding-right"></span>',t.appendChild(r),0==e.handle&&(r.innerHTML="",r.classList.remove("handleOn"));var l=debounce(function(e,t,l){if(r){var c=t-e;l.querySelectorAll(".sliding")[0].style.left=(e>0?e:0)+"px";l.querySelectorAll(".scrub-left")[0].style.width=(e>0?e:0)+"px";l.querySelectorAll(".scrub-right")[0].style.width=(c>0?c:0)+"px"}},1);t.addEventListener("mousemove",function(e){var r=e.clientX-this.offsetLeft,c=t.offsetWidth;l(r,c,t)})})}catch(e){console.trace("%cuh-oh: %c"+e,"color:indianred;","color:cornflowerblue;")}}isObject(e)||"object"==typeof e?(e.target=void 0===e.target||!isObject(e)&&"object"!=typeof e?null:e.target,e.height=void 0===e.height||!isObject(e)&&"object"!=typeof e?"500px":e.height,e.handle=void 0===e.handle||!isObject(e)&&"object"!=typeof e||e.handle,e.src=void 0===e.src||!isObject(e)&&"object"!=typeof e?null:e.src,e.alt=void 0===e.alt||!isObject(e)&&"object"!=typeof e?null:e.alt,t()):t()}var isObject=function(e){return!!e&&e.constructor===Object};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcnViLmpzIl0sIm5hbWVzIjpbImRlYm91bmNlIiwiZnVuYyIsIndhaXQiLCJpbW1lZGlhdGUiLCJ0aW1lb3V0IiwiY29udGV4dCIsInRoaXMiLCJhcmdzIiwiYXJndW1lbnRzIiwibGF0ZXIiLCJhcHBseSIsImNhbGxOb3ciLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiU2NydWIiLCJzY3J1YkFyZyIsIlNjcnViSW5pdGlhdGUiLCJzY3J1YlNsaWRlciIsImlzT2JqZWN0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwidGFyZ2V0IiwiY2FsbGJhY2siLCJzY3J1Yk5hbWUiLCJyZXBsYWNlIiwiaW5kZXhPZiIsImxlbmd0aCIsImNvbnNvbGUiLCJ3YXJuIiwidW5kZWZpbmVkIiwiY2xhc3NOYW1lIiwic2xpZGVyV2lkdGgiLCJvZmZzZXRXaWR0aCIsImhlaWdodCIsInN0eWxlIiwic2NydWJDaGlsZHJlbiIsImNoaWxkcmVuIiwiaSIsImNoaWxkIiwidGFnTmFtZSIsImVsIiwidHlwZSIsImluZGV4Iiwic2NydWJJbWFnZSIsImNsb25lTm9kZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInNjcnViQ29udCIsImNyZWF0ZUVsZW1lbnQiLCJ3aWR0aCIsInBhcnNlSW50IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsImFsdCIsInNldEF0dHJpYnV0ZSIsInNyYyIsImltZ1NyYyIsImJhY2tncm91bmRJbWFnZSIsImFwcGVuZENoaWxkIiwicmV6aXNlRm4iLCJuZXdTbGlkZXJXaWR0aCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiZ2V0QXR0cmlidXRlIiwic2NydWJIYW5kbGUiLCJpbm5lckhUTUwiLCJoYW5kbGUiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJtb3ZlciIsInBvcyIsImZ1bGwiLCJzbGlkZXIiLCJzaHJpbmsiLCJsZWZ0IiwibW91c2VQb3NpdGlvbiIsImNsaWVudFgiLCJvZmZzZXRMZWZ0Iiwi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cGVyIGZ1bmN0aW9uc1xuLy8gb2JqZWN0IHRlc3RcbnZhciBpc09iamVjdCA9IGZ1bmN0aW9uKGEpIHtcbiAgICByZXR1cm4gKCEhYSkgJiYgKGEuY29uc3RydWN0b3IgPT09IE9iamVjdCk7XG59O1xuLy8gZGVib3VuY2UgKHRoYW5rcyB0byBVbmRlcnNjb3JlKVxuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG4gICAgdmFyIHRpbWVvdXQ7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIHZhciBsYXRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoIWltbWVkaWF0ZSkgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgICAgICBpZiAoY2FsbE5vdykgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB9O1xufTtcblxuZnVuY3Rpb24gU2NydWIoc2NydWJBcmcpIHtcblxuICAgIC8vIGNoZWNrIGlmIHNpbXBsZSBjYWxsIG9yIGNvbmZpZyBwYXNzZWRcbiAgICBpZiAoIGlzT2JqZWN0KHNjcnViQXJnKSB8fCB0eXBlb2Ygc2NydWJBcmcgPT0gJ29iamVjdCcgKSB7XG4gICAgICAgIC8vIHNldCBmdW5jdGlvbiBkZWZhdWx0IGFyZ3VtZW50c1xuICAgICAgICAgIHNjcnViQXJnLnRhcmdldCA9ICggdHlwZW9mIHNjcnViQXJnLnRhcmdldCAhPT0gJ3VuZGVmaW5lZCcgJiYgKGlzT2JqZWN0KHNjcnViQXJnKSB8fCB0eXBlb2Ygc2NydWJBcmcgPT0gJ29iamVjdCcgKSApID8gc2NydWJBcmcudGFyZ2V0IDogbnVsbDtcbiAgICAgICAgICBzY3J1YkFyZy5oZWlnaHQgPSAoIHR5cGVvZiBzY3J1YkFyZy5oZWlnaHQgIT09ICd1bmRlZmluZWQnICYmIChpc09iamVjdChzY3J1YkFyZykgfHwgdHlwZW9mIHNjcnViQXJnID09ICdvYmplY3QnICkgKSA/IHNjcnViQXJnLmhlaWdodCA6ICc1MDBweCc7XG4gICAgICAgICAgc2NydWJBcmcuaGFuZGxlID0gKCB0eXBlb2Ygc2NydWJBcmcuaGFuZGxlICE9PSAndW5kZWZpbmVkJyAmJiAoaXNPYmplY3Qoc2NydWJBcmcpIHx8IHR5cGVvZiBzY3J1YkFyZyA9PSAnb2JqZWN0JyApICkgPyBzY3J1YkFyZy5oYW5kbGUgOiB0cnVlO1xuICAgICAgICAgIHNjcnViQXJnLnNyYyA9ICggdHlwZW9mIHNjcnViQXJnLnNyYyAhPT0gJ3VuZGVmaW5lZCcgJiYgKGlzT2JqZWN0KHNjcnViQXJnKSB8fCB0eXBlb2Ygc2NydWJBcmcgPT0gJ29iamVjdCcgKSApID8gc2NydWJBcmcuc3JjIDogbnVsbDtcbiAgICAgICAgICBzY3J1YkFyZy5hbHQgPSAoIHR5cGVvZiBzY3J1YkFyZy5hbHQgIT09ICd1bmRlZmluZWQnICYmIChpc09iamVjdChzY3J1YkFyZykgfHwgdHlwZW9mIHNjcnViQXJnID09ICdvYmplY3QnICkgKSA/IHNjcnViQXJnLmFsdCA6IG51bGw7XG5cbiAgICAgICAgU2NydWJJbml0aWF0ZSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgU2NydWJJbml0aWF0ZSgpO1xuICAgIH1cblxuZnVuY3Rpb24gU2NydWJJbml0aWF0ZSgpIHtcbiAgICAvLyBnZXQgY2hvc2VuIHNsaWRlciBjb250YWluZXJcbiAgICB2YXIgc2NydWJTbGlkZXIgPSAoIGlzT2JqZWN0KHNjcnViQXJnKSB8fCB0eXBlb2Ygc2NydWJBcmcgPT0gJ29iamVjdCcgKSA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2NydWJBcmcudGFyZ2V0KVswXSA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2NydWJBcmcpWzBdIDtcblxuICAgIHRyeSB7XG4gICAgICAgIGZ1bmN0aW9uIHV0aWxpdHlGbihjYWxsYmFjaykge1xuXG4gICAgICAgICAgLy8gYXZvaWQgbm9uLXNwZWNpZmljIGNsYXNzZXMuLlxuICAgICAgICAgIHZhciBzY3J1Yk5hbWUgPSAoIGlzT2JqZWN0KHNjcnViQXJnKSB8fCB0eXBlb2Ygc2NydWJBcmcgPT0gJ29iamVjdCcgKSA/IChzY3J1YkFyZy50YXJnZXQpIDogc2NydWJBcmc7XG4gICAgICAgICAgc2NydWJOYW1lID0gc2NydWJOYW1lLnJlcGxhY2UoXCIjXCIsIFwiXCIpO1xuICAgICAgICAgIHNjcnViTmFtZSA9IHNjcnViTmFtZS5yZXBsYWNlKFwiLlwiLCBcIlwiKTtcbiAgICAgICAgICBpZiAoIHNjcnViTmFtZS5pbmRleE9mKCcuJykgPiAtMSAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNjcnViTmFtZSkubGVuZ3RoID4gMSApIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignJWNTY3J1YiBTbGlkZXIgd29ya3MgYmVzdCBpZiB5b3UgdXNlIGFuICVjSUQlYyBvciBhICVjdW5pcXVlJWMgY2xhc3MuLi4gJywnY29sb3I6Y29ybmZsb3dlcmJsdWU7JywnY29sb3I6aW5kaWFucmVkOycsJ2NvbG9yOmNvcm5mbG93ZXJibHVlOycsJ2NvbG9yOmluZGlhbnJlZDsnLCdjb2xvcjpjb3JuZmxvd2VyYmx1ZTsnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggc2NydWJTbGlkZXIgIT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICBzY3J1YlNsaWRlci5jbGFzc05hbWUgKz0gXCIgc2NydWItc2xpZGVyXCI7XG4gICAgICAgICAgICAgIHZhciBzbGlkZXJXaWR0aCA9IHNjcnViU2xpZGVyLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAvLyBzZXQgaGVpZ2h0IGlmIGdpdmVuXG4gICAgICAgICAgICAgIGlmICggc2NydWJBcmcuaGVpZ2h0ICE9IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgc2NydWJTbGlkZXIuc3R5bGUuaGVpZ2h0ID0gc2NydWJBcmcuaGVpZ2h0O1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBnZXQgY2hvc2VuIHNsaWRlcidzIGltYWdlc1xuICAgICAgICAgICAgICAgIHZhciBzY3J1YkNoaWxkcmVuID0gc2NydWJTbGlkZXIuY2hpbGRyZW47XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVTY3J1YkltYWdlcyhlbCx0eXBlLGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggdHlwZSA9PSAnRElWJyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xvbmUgZGl2XG4gICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3J1YkltYWdlID0gZWwuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5qZWN0IHNjcnViIGNvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2NydWJDb250ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViQ29udC5jbGFzc05hbWUgPSAoIGluZGV4ID09IDAgKSA/IFwic2NydWItY29udGVudCBzY3J1Yi1sZWZ0XCIgOiBcInNjcnViLWNvbnRlbnQgc2NydWItcmlnaHRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgc2NydWJDb250LnN0eWxlLndpZHRoID0gcGFyc2VJbnQoc2xpZGVyV2lkdGggLyAyKSArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgc2NydWJTbGlkZXIuaW5zZXJ0QmVmb3JlKHNjcnViQ29udCxzY3J1YlNsaWRlci5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gcmUtYXR0YWNoIGRpdlxuICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkltYWdlLnN0eWxlLndpZHRoID0gc2xpZGVyV2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBhbHQgc3BlY2lmaWVkIG1hbnVhbGx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNjcnViQXJnLmFsdCAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcnViSW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCAoICggaW5kZXggPT0gMCApID8gc2NydWJBcmcuYWx0WzBdIDogc2NydWJBcmcuYWx0WzFdICkgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHNyYyBzcGVjaWZpZWQgbWFudWFsbHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNjcnViQXJnLnNyYyAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1nU3JjID0gKCBpbmRleCA9PSAwICkgPyBzY3J1YkFyZy5zcmNbMF0gOiBzY3J1YkFyZy5zcmNbMV0gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkltYWdlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIGltZ1NyYyArICcpJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViQ29udC5hcHBlbmRDaGlsZChzY3J1YkltYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCBhIGJhY2tncm91bmQgaW1hZ2UuLlxuICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGVsLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9PSAnJyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignJWNTY3J1YiBTbGlkZXIgZGl2cyBtdXN0IGhhdmUgYSAlY2JhY2tncm91bmQgaW1hZ2UgdG8gd29yayElYyA+OlsnLCdjb2xvcjpjb3JuZmxvd2VyYmx1ZTsnLCdjb2xvcjppbmRpYW5yZWQ7JywnY29sb3I6Y29ybmZsb3dlcmJsdWU7Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgcmVzaXplXG4gICAgICAgICAgICAgICAgICAgICAgIHZhciByZXppc2VGbiA9IGRlYm91bmNlKGZ1bmN0aW9uKHNjcnViSW1hZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdTbGlkZXJXaWR0aCA9IHNjcnViU2xpZGVyLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NydWJDb250LnN0eWxlLndpZHRoID0gcGFyc2VJbnQobmV3U2xpZGVyV2lkdGggLyAyKSArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcnViSW1hZ2Uuc3R5bGUud2lkdGggPSBuZXdTbGlkZXJXaWR0aCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlemlzZUZuKHNjcnViSW1hZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCB0eXBlID09ICdJTUcnICkge1xuICAgICAgICAgICAgICAgICAgICAgICAvLyBjbG9uZSBkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjcnViSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZ1NyYyA9IGVsLmdldEF0dHJpYnV0ZSgnc3JjJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgc3JjIHNwZWNpZmllZCBtYW51YWxseVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc2NydWJBcmcuc3JjICE9IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1NyYyA9ICggaW5kZXggPT0gMCApID8gc2NydWJBcmcuc3JjWzBdIDogc2NydWJBcmcuc3JjWzFdIDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmplY3Qgc2NydWIgY29udGFpbmVyXG4gICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3J1YkNvbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgc2NydWJDb250LmNsYXNzTmFtZSA9ICggaW5kZXggPT0gMCApID8gXCJzY3J1Yi1jb250ZW50IHNjcnViLWxlZnRcIiA6IFwic2NydWItY29udGVudCBzY3J1Yi1yaWdodFwiO1xuICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkNvbnQuc3R5bGUud2lkdGggPSBwYXJzZUludChzbGlkZXJXaWR0aCAvIDIpICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgYWx0IHNwZWNpZmllZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzY3J1YkFyZy5hbHQgIT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgKCAoIGluZGV4ID09IDAgKSA/IHNjcnViQXJnLmFsdFswXSA6IHNjcnViQXJnLmFsdFsxXSApIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgc2NydWJTbGlkZXIuaW5zZXJ0QmVmb3JlKHNjcnViQ29udCxzY3J1YlNsaWRlci5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gcmUtYXR0YWNoIGRpdlxuICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkltYWdlLnN0eWxlLndpZHRoID0gc2xpZGVyV2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViSW1hZ2Uuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgaW1nU3JjICsgJyknO1xuICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkNvbnQuYXBwZW5kQ2hpbGQoc2NydWJJbWFnZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIHJlc2l6ZVxuICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV6aXNlRm4gPSBkZWJvdW5jZShmdW5jdGlvbihzY3J1YkltYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3U2xpZGVyV2lkdGggPSBzY3J1YlNsaWRlci5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcnViQ29udC5zdHlsZS53aWR0aCA9IHBhcnNlSW50KG5ld1NsaWRlcldpZHRoIC8gMikgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkltYWdlLnN0eWxlLndpZHRoID0gbmV3U2xpZGVyV2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXppc2VGbihzY3J1YkltYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8IDI7IGkrKykge1xuICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gc2NydWJDaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICAgIGlmICggc2NydWJDaGlsZHJlbltpXSAmJiBjaGlsZC50YWdOYW1lICkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTY3J1YkltYWdlcyggc2NydWJDaGlsZHJlbltpXSwgY2hpbGQudGFnTmFtZSwgaSApO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FsbGJhY2soc2NydWJTbGlkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCclY1NjcnViIFNsaWRlciBuZWVkcyB0byBiZSBwYXNzZWQgYW4gYXBwcm9wcmlhdGUgc2VsZWN0b3IgJWMtIHByZWZlcmFibHkgYW4gSUQsIGJ1dCBhIHNwZWNpZmljLCB1bmlxdWUgY2xhc3Mgd29ya3MgdG9vLicsJ2NvbG9yOmNvcm5mbG93ZXJibHVlOycsJ2NvbG9yOmluZGlhbnJlZDsnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgICAgICB1dGlsaXR5Rm4oZnVuY3Rpb24oc2NydWJTbGlkZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBhZGQgc2NydWIgY29udHJvbC9oYW5kbGVcbiAgICAgICAgICAgICAgICB2YXIgc2NydWJIYW5kbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBzY3J1YkhhbmRsZS5jbGFzc05hbWU9IFwic2xpZGluZyBoYW5kbGVPbiBcIjtcbiAgICAgICAgICAgICAgICBzY3J1YkhhbmRsZS5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJzbGlkaW5nLWxlZnRcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJzbGlkaW5nLXJpZ2h0XCI+PC9zcGFuPic7XG4gICAgICAgICAgICAgICAgc2NydWJTbGlkZXIuYXBwZW5kQ2hpbGQoc2NydWJIYW5kbGUpO1xuXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGhhbmRsZSBpZiBzcGVjaWZpZWRcbiAgICAgICAgICAgICAgICBpZiAoIHNjcnViQXJnLmhhbmRsZSA9PSBmYWxzZSApIHtcbiAgICAgICAgICAgICAgICAgICAgc2NydWJIYW5kbGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHNjcnViSGFuZGxlLmNsYXNzTGlzdC5yZW1vdmUoJ2hhbmRsZU9uJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gc2NydWIgc2xpZGVyIG1haW4gYWN0aW9uIGZuXG4gICAgICAgICAgICAgICAgdmFyIG1vdmVyID0gZGVib3VuY2UoZnVuY3Rpb24ocG9zLGZ1bGwsc2xpZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggc2NydWJIYW5kbGUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2hyaW5rID0gZnVsbCAtIHBvcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzbGlkaW5nID0gc2xpZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkaW5nWzBdLnN0eWxlLmxlZnQgPSAoKHBvcyA+IDApID8gcG9zIDogMCkgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudExlZnQgPSBzbGlkZXIucXVlcnlTZWxlY3RvckFsbCgnLnNjcnViLWxlZnQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRMZWZ0WzBdLnN0eWxlLndpZHRoID0gKChwb3MgPiAwKSA/IHBvcyA6IDApICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnRSaWdodCA9IHNsaWRlci5xdWVyeVNlbGVjdG9yQWxsKCcuc2NydWItcmlnaHQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRSaWdodFswXS5zdHlsZS53aWR0aCA9ICgoc2hyaW5rID4gMCkgPyBzaHJpbmsgOiAwKSArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDEpO1xuICAgICAgICAgICAgICAgIC8vIGFkZCBtb3VzZW1vdmUgbGlzdGVuZXJcbiAgICAgICAgICAgICAgICBzY3J1YlNsaWRlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgbW91c2VQb3NpdGlvbiA9IGUuY2xpZW50WCAtIHRoaXMub2Zmc2V0TGVmdDtcbiAgICAgICAgICAgICAgICAgIHZhciBmdWxsV2lkdGggPSBzY3J1YlNsaWRlci5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICAgIG1vdmVyKG1vdXNlUG9zaXRpb24sZnVsbFdpZHRoLHNjcnViU2xpZGVyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1jYXRjaChlKXtcbiAgICAgICAgY29uc29sZS50cmFjZSgnJWN1aC1vaDogJWMnICsgZSArICcnLCdjb2xvcjppbmRpYW5yZWQ7JywnY29sb3I6Y29ybmZsb3dlcmJsdWU7Jyk7XG4gICAgfVxufVxufVxuIl19
